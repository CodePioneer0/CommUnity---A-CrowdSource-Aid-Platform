<!DOCTYPE html>
<html>
<head>
    <title>View Issues</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        // Function to toggle upvote/downvote state
        function toggleVote(button) {
            if (button.classList.contains("btn-success")) {
                // Change button to Downvote
                button.classList.remove("btn-success");
                button.classList.add("btn-danger");
                button.textContent = "Downvote Issue";
            } else {
                // Change button back to Upvote
                button.classList.remove("btn-danger");
                button.classList.add("btn-success");
                button.textContent = "Upvote Issue";
            }
        }
    </script>
</head>
<body>
    <div class="container mt-5">
        <h2>View Issues</h2>
        <div class="row mt-4">
            <!--{% for issue in issues %}-->
            <div class="col-md-6 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{ issue.name }}</h5>
                        <p class="card-text"><strong>Category:</strong> {{ issue.category }}</p>
                        <p class="card-text"><strong>Location:</strong> {{ issue.location }}</p>
                        <span class="badge rounded-pill bg-secondary position-absolute top-0 end-0 m-3" id="upvoteCount2">
                            {{ issue.upvotes }} <!-- Replace with the dynamic count -->
                        </span>
                        <!-- Button to view full issue details -->
                        <a href="{% url 'view_issue_details' issue.id %}" class="btn btn-primary">View Details</a>
                        <a href="javascript:void(0);" class="btn btn-success" onclick="toggleVote(this)">Upvote Issue</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{ issue.name }}</h5>
                        <p class="card-text"><strong>Category:</strong> {{ issue.category }}</p>
                        <p class="card-text"><strong>Location:</strong> {{ issue.location }}</p>
                        <span class="badge rounded-pill bg-secondary position-absolute top-0 end-0 m-3" id="upvoteCount2">
                            {{ issue.upvotes }} <!-- Replace with the dynamic count -->
                        </span>
                        <!-- Button to view full issue details -->
                        <a href="{% url 'view_issue_details' issue.id %}" class="btn btn-primary">View Details</a>
                        <a href="javascript:void(0);" class="btn btn-success" onclick="toggleVote(this)">Upvote Issue</a>
                    </div>
                </div>
            </div>
            <!--{% endfor %}-->
        </div>
        <a href="javascript:history.back()" class="btn btn-primary">Back</a>
    </div>
</body>
</html>
